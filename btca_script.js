if(window.jQuery){function apirone_query(){jQuery(".btca-refresh").addClass("rotating");var e=function(e){var t,o,r=decodeURIComponent(window.location.search.substring(1)).split("&");for(o=0;o<r.length;o++)if((t=r[o].split("="))[0]===e)return void 0===t[1]||t[1]},t=e("key"),o=e("order");null!=t&&null!=o&&(abf_get_query="/?wc-api=check_payment&key="+t+"&order="+o,jQuery.ajax({url:abf_get_query,dataType:"text",success:function(r,e){console.log(r),r=JSON.parse(r),console.log(r.status),"complete"==r.status&&(complete=1,jQuery(".with-uncomfirmed, .uncomfirmed").empty(),statusText="Payment complete"),"innetwork"==r.status&&(innetwork=1,complete=0,jQuery(".with-uncomfirmed").text("(with uncomfirmed)"),statusText="Transaction in network (income amount: "+r.innetwork_amount+" BTC)"),"waiting"==r.status&&(complete=0,jQuery(".with-uncomfirmed, .uncomfirmed").empty(),statusText="Waiting payment"),jQuery(".btca-tx").empty(),r.transactions?r.transactions.forEach(function(e,t,o){console.log(e.thash),console.log(e.input_thash),console.log(e.confirmations),e.confirmations>=r.count_confirmations?color="btca-green":0<e.confirmations&&e.confirmations<r.count_confirmations?color="btca-yellow":color="btca-red";tx='<div><a href="https://btc.com/'+e.input_thash+'" target="_blank">'+e.input_thash.substr(0,8)+"..."+e.input_thash.substr(-8)+'</a><div class="btca-confirmations '+color+'" title="Confirmations count">'+e.confirmations+"</div></div>",jQuery(".btca-tx").prepend(tx)}):jQuery(".btca-tx").prepend("No TX yet"),input_address=jQuery(".btca-input-address").html(),encoded_msg=encodeURIComponent("bitcoin:"+input_address+"?amount="+r.remains_to_pay+"&label=BTCA"),src="https://chart.googleapis.com/chart?chs=225x225&cht=qr&chl="+encoded_msg,console.log(src),jQuery(".btca-img-height").hide(),jQuery(".btca-img-height").attr("src",src),jQuery(".btca-img-height").show(),jQuery(".btca-totalbtc").text(r.total_btc),jQuery(".btca-arrived").text(r.arrived_amount),remains=parseFloat(r.remains_to_pay),console.log(r),remains=remains.toFixed(8),remains<0&&(remains=0),jQuery(".btca-remains").text(remains),jQuery(".btca-status").text(statusText),complete_block='<div class="btca-complete"><p>Thank You! Payment done. Order finished.</p></div>',!jQuery("div").is(".btca-complete")&&complete&&jQuery(".btca-data").after(complete_block),jQuery(".btca-refresh").removeClass("rotating")},error:function(e,t,o){jQuery(".apirone_result").html("<h4>Waiting for payment...</h4>")}}))}apirone_query(),setInterval(apirone_query,7e3),jQuery(document).ready(function(){jQuery(".btca-refresh").click(function(e){jQuery(".btca-refresh").addClass("rotating"),apirone_query()})})}